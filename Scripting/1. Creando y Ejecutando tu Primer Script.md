# Capítulo 1 - Creando y Ejecutando tu Primer Script de Bash Shell
_Si tienes que hacerlo más de una vez, ¡Automatiza!_

A menudo te encontrarás repitiendo una misma tarea en Linux una y otra vez. Puede ser una simple copia de seguridad de un directorio o podría ser la limpieza de archivos temporales o incluso puede ser la clonación de una base de datos.

La automatización de una tarea es uno de los muchos escenarios útiles en los que se puede aprovechar el poder de los scripts de bash.

Permíteme mostrarte cómo crear un simple script de shell bash, cómo ejecutarlo y cuáles son las cosas que debes saber sobre estos.<br>

---
### Cree y Ejecute su primer script de shell

Primero vamos a crear un nuevo directorio llamado `scripts` que albergará todos nuestros scripts bash.

```bash
    ┌──(kali㉿Kali)-[~]
    └─$ mkdir scripts

    ┌──(kali㉿Kali)-[~]
    └─$ cd scripts

    ┌──(kali㉿Kali)-[~/scripts]
    └─$ 
```

Ahora, dentro de este directorio de scripts, crea un nuevo archivo llamado `hola.sh` usando el comando `cat`.

```bash
    ┌──(kali㉿Kali)-[~/scripts]
    └─$ cat > hola.sh
```

Inserta la siguiente línea dentro del documento escribiéndola en el terminal:

```bash
    ┌──(kali㉿Kali)-[~/scripts]
    └─$ cat > hola.sh
    echo '¡Hola, mundo!'
```

Pulsa `Ctrl + D` para guardar el texto en el archivo y salir del comando cat.

También puede utilizar un editor de texto basado en terminal como Vim, Emacs o Nano. Si estás utilizando un Linux de escritorio, también puedes utilizar un editor de texto gráfico como Gedit para añadir el texto a este archivo.

Básicamente, estás usando el comando `echo` para imprimir '¡Hola, mundo!'. Puedes usar este comando en la terminal directamente, pero en esta prueba, ejecutarás este comando a través de un script de shell.

Ahora, para lograr que que el archivo `hola.sh` sea ejecutable, utilizaremos el comando `chmod` de la siguiente manera:

```bash
    ┌──(kali㉿Kali)-[~/scripts]
    └─$ chmod u+x hola.sh
```

Finalmente, ejecuta tu primer script de shell precediendo a `hola.sh` con su shell deseado `bash`:

```bash
    ┌──(kali㉿Kali)-[~/scripts]
    └─$ bash hola.sh
```

Verás que se imprime ¡Hola, mundo! en la pantalla. Probablemente ese ha sido el programa de Hola Mundo más fácil que has escrito, ¿verdad?.

### Convierte tu script de shell en script de bash

__"Bash"__, que es la abreviatura de "Bourne-Again Shell", es solo un tipo de los muchos shells disponibles en Linux.

Un shell es un intérprete de línea de comandos que acepta y ejecuta comandos. Si alguna vez has ejecutado algún comando de Linux, entonces has utilizado el shell. Cuando abres un terminal en Linux, ya estás ejecutando el shell por defecto de tu sistema. 

Bash suele ser el shell por defecto en la mayoría de las distribuciones de Linux. Por ello, bash suele ser sinónimo de shell.

Los scripts del shell suelen tener casi la misma sintaxis, pero también diferente a veces. Por ejemplo, el índice del array comienza en 1 en Zsh en lugar de 0 en Bash. Un script escrito para el shell Zsh no funcionará igual en Bash si tiene arrays.

Para evitar sorpresas desagradables, debes decirle al intérprete que tu script de shell está escrito para el shell bash. ¿Cómo se hace? ¡Usando shebang!

#### La línea shebang al principio del script de shell
La línea `#! /bin/bash` se conoce como la línea shebang y en alguna literatura, se conoce como la línea hashbang y eso porque comienza con los dos caracteres hash `#` y bang `!`.

```bash
    #! /bin/bash
    echo '¡Hola, mundo!'
```
Cuando incluyes la línea `#!/bin/bash` en la parte superior de tu script, el sistema sabe que quieres usar bash como intérprete para tu script. Por lo tanto, ahora puedes ejecutar el script `hola.sh` directamente sin precederlo con `bash`.

```bash
    ┌──(kali㉿Kali)-[~/scripts]
    └─$ cat > hola.sh
    #! /bin/bash

    echo '¡Hola, mundo!'

    ┌──(kali㉿Kali)-[~/scripts]
    └─$ chmod u+x hola.sh

    ┌──(kali㉿Kali)-[~/scripts]
    └─$ ./hola.sh
    ¡Hola, mundo!

    ┌──(kali㉿Kali)-[~/scripts]
    └─$ 
```

#### Añade tu script de shell al PATH (para que pueda ser ejecutado desde cualquier directorio)
Habrás notado que he utilizado `./hola.sh` para ejecutar el script; obtendrás un error si omites el `./` inicial.

```bash
    ┌──(kali㉿Kali)-[~/scripts]
    └─$ hola.sh
    hola.sh: command not found
```

Bash pensó que estabas tratando de ejecutar un comando llamado `hola.sh`. Cuando ejecutas cualquier comando en tu terminal; el shell busca ese comando en un conjunto de directorios que se almacenan en la variable PATH.

Puedes usar echo para ver el contenido de esa variable PATH

```bash
    ┌──(kali㉿Kali)-[~/scripts]
    └─$ echo $PATH
    /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin
```

El caracter de dos puntos (`:`) separa la ruta de cada uno de los directorios que su shell explora cada vez que ejecuta un comando.

Los comandos de Linux como `echo`, `cat`, etc., pueden ejecutarse desde cualquier lugar porque sus archivos ejecutables se almacenan en los directorios `bin`. Los directorios `bin` se incluyen en el PATH. Cuando se ejecuta un comando, el sistema comprueba el PATH para todos los posibles lugares que debe buscar para encontrar el ejecutable para ese comando.

Si quieres ejecutar tu script bash desde cualquier lugar, como si fuera un comando normal de Linux, añade la ubicación de tu script de shell a la variable PATH.

Primero, obten la ubicación del directorio de tu script (asumiendo que estás en el mismo directorio), usando el comando `pwd`:

```bash
    ┌──(kali㉿Kali)-[~/scripts]
    └─$ pwd
    /home/kali/scripts
```
Utiliza el comando `export` para añadir tu directorio de scripts a la variable PATH.

```bash
    ┌──(kali㉿Kali)-[~/scripts]
    └─$ export PATH=$PATH:/home/kali/scripts
```
Ejecuta `hola.sh`
```bash
    ┌──(kali㉿Kali)-[~/scripts]
    └─$ hola.sh
    ¡Hola, mundo!
```
