# Capítulo 2 - Comprendiendo las Variables de Bash Shell
Las variables siempre son útiles al escribir un script de bash, aquí aprenderás cómo utilizar las variables en tus scripts de bash.

---

Debes haber conocido bastante las variables si conoces algún lenguaje de programación.

Si nunca has trabajado con variables, puedes pensar en ellas como un contenedor que almacena una información y que ademas puede variar con el tiempo.

## Uso de variables en scripts de Shell Bash

En el capítulo anterior, aprendiste a escribir un programa en bash.

```bash
    #! /bin/bash

    echo '¡Hola, mundo!'
```

Ese era un simple script de Hola, mundo. Ahora, hagamos uno mejor.

Mejoremos este script usando variables de shell para que salude a los usuarios con sus nombres. Edita tu script `hola.sh` y utiliza el comando `read` para obtener la entrada del usuario.

```bash
    #! /bin/bash

    echo "¿Cuál es tu nombre?"
    read NOMBRE
    echo "Hola, $NOMBRE"
```

Ahora, si ejecutas tu script `hola.sh`; te pedirá tu nombre y luego te saludará con el nombre que le proporciones:

```bash
    ┌──(kali㉿Kali)-[~]
    └─$ hola.sh
    ¿Cuál es tu nombre?
    Kali
    Hola, Kali
```

En este ejemplo, introduje Kali como mi nombre y el script me saludó con "Hola, Kali".

### Desglose del script

Ahora, vamos a repasar el script línea por línea para asegurarnos de que lo entiendes todo.

+ Primero, incluí la línea hashbang para indicar explícitamente que vamos a usar el shell de bash para ejecutar este script.
```bash
    #! /bin/bash
```

+ A continuación, pido al usuario que introduzca su nombre:
```bash
    echo "¿Cuál es tu nombre?"
```
Se trata de un simple comando `echo` para imprimir una línea, bastante autoexplicativo.

+ Ahora, la siguiente línea:
```bash
    read NOMBRE
```
Aquí, utilicé el comando `read` para transferir el control de la ejecución del script al usuario, para que el usuario pueda ingresar un nombre y luego almacenar lo que el usuario ingresó en la variable `name`.

Por último, el script saluda al usuario con su nombre.
```bash
    echo "Hola, $NOMBRE"
```
Aquí, tienes que preceder el nombre de la variable con un `$` para obtener el valor almacenado en el nombre de la variable. Si omites el signo, se mostraría "Hola, nombre" en su lugar.

## Diferentes tipos de datos en las variables
Vamos a revisar un poco más sobre las variables.

Puedes usar el signo igual (`=`) para crear y establecer el valor de una variable. Por ejemplo, la siguiente línea creará una variable llamada `edad` y establecerá su valor en `27`
```bash
    edad = 21
```
Después de haber creado la variable `edad`, puedes cambiar su valor tanto como quieras.
```bash
    edad = 3
```
El comando anterior cambia el valor de la variable `edad` de `27` a `3`.<br>
Las variables pueden contener diferentes tipos de datos; pueden almacenar enteros, cadenas y caracteres.
```bash
    letra = 'c'
    color = 'azul'
    año = 2026
```

## Constantes en bash
También puedes crear una constante, es decir, que su valor no cambiará nunca.<br>
Esto puede hacerse precediendo el nombre con el comando `readonly`:
```bash
    readonly PI=3.14159
```
El comando anterior crea una constante `PI` y establece su valor en 3.14159. Ahora, no puedes cambiar el valor de una constante, si lo intentas, obtendrás un error:
```bash
    bash: PI: readonly variable
```
Como puedes ver, sólo puedes leer el valor de una constante sin poder cambiar su valor después de haberla creado.

## Sustituciones de comandos
La capacidad de almacenar la salida de un comando en una variable se llama sustitución de comandos y es, con mucho, una de las características más sorprendentes de bash.

El comando `date` es un ejemplo clásico para demostrar la sustitución de comandos:
```bash
    HOY=$(date)
```
El comando anterior almacenará la salida del comando `date` en la variable `HOY`. El comando debe estar entre paréntesis y con un signo de pesos a la izquierda.<br>
También puede encerrar el comando entre un par de comillas:
```bash
    HOY=`date`
```
Este método es la forma antigua de hacer la sustitución de comandos, por lo que recomiendo encarecidamente que lo evites y uses el enfoque moderno:
```bash
    variable=$(comando)
```

### Mejorar el script
Ahora que acabas de aprender la sustitución de comandos, tendría sentido visitar el script hola.sh una última vez para perfeccionarlo.

La última vez pedimos al usuario que introdujera su nombre para que el script lo saludara; esta vez, no vamos a preguntar, vamos a hacer que el script ya lo sepa.

Utiliza el comando `whoami` junto con la sustitución de comandos para saludar a quien ejecute el script:
```bash
    #! /bin/bash

    echo "Hola, $(whoami)"
```
Solo necesité dos líneas en este script, lo que lo reduce considerablemente. Ahora, ejecuta el script:
```bash
    ┌──(kali㉿Kali)-[~]
    └─$ hola.sh
    Hola, kali
```
Funciona perfectamente utilizando el comando `whoami` para obtener el nombre del usuario, pasaría lo mismo como usuario _root_.
```bash
    ┌──(root㉿Kali)-[~]
    └─# hola.sh
    Hola, root
```

